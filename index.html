<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sterowanie Piecem Peletowym ESP32</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script> <script src="https://cdn.jsdelivr.net/npm/luxon@3.3.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1"></script>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Twoje istniejące style CSS - BEZ ZMIAN W STYLU */
        :root{--primary:#2c3e50;--secondary:#3498db;--danger:#e74c3c;--warning:#f39c12;--success:#2ecc71;--dark:#1a252f;--flame-on:#ff5722;--flame-off:#555;--igniter-heating:#ff9800;--igniter-ready:#9c27b0;--feeder-color:#8e44ad;--blower-color:#1abc9c;--maintenance-color:#9b59b6;--clean-color:#e67e22;--pellet-color:#d35400;--mqtt-connected:#2ecc71;--mqtt-disconnected:#e74c3c;--feeder-forward-color:#2ecc71;
/* Green */ --feeder-pause-color:#e74c3c; /* Red */ --feeder-reverse-color:#9b59b6; /* Purple */}*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}body{background:linear-gradient(135deg,var(--dark),var(--primary));color:white;min-height:100vh;padding:20px;line-height:1.6;}.container{max-width:1200px;margin:0 auto;}header{text-align:center;padding:20px 0;margin-bottom:20px;border-bottom:1px solid rgba(255,255,255,0.1);background:rgba(0,0,0,0.2);border-radius:15px;}h1{font-size:2.5rem;margin-bottom:10px;color:white;display:flex;align-items:center;justify-content:center;gap:15px;}.subtitle{font-size:1.1rem;color:#3498db;max-width:800px;margin:0 auto;}.dashboard{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:30px;}@media (max-width:992px){.dashboard{grid-template-columns:1fr;}}.card{background:rgba(255,255,255,0.08);border-radius:15px;padding:25px;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.15);box-shadow:0 10px 35px rgba(0,0,0,0.3);transition:all 0.3s ease;}.card:hover{transform:translateY(-5px);box-shadow:0 15px 40px rgba(0,0,0,0.4);}.card-title{font-size:1.5rem;margin-bottom:20px;color:#3498db;display:flex;align-items:center;gap:10px;padding-bottom:15px;border-bottom:1px solid rgba(255,255,255,0.1);}.card-title i{font-size:1.8rem;}.status-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:20px;}.status-item{background:rgba(0,0,0,0.25);border-radius:12px;padding:18px;text-align:center;transition:transform 0.3s;}.status-item:hover{transform:scale(1.03);background:rgba(0,0,0,0.3);}.status-label{font-size:1rem;color:#bbb;margin-bottom:8px;display:flex;align-items:center;justify-content:center;gap:8px;}.status-value{font-size:2rem;font-weight:bold;color:white;}.status-unit{font-size:1.2rem;color:#7f8c8d;}.progress-container{background:rgba(0,0,0,0.3);border-radius:10px;height:20px;margin:15px 0;overflow:hidden;}.progress-bar{height:100%;border-radius:10px;transition:width 0.5s ease;}.heating-bar{background:linear-gradient(90deg,#ff9800,#ff5722);}.ignition-bar{background:linear-gradient(90deg,#3498db,#2ecc71);}.feeder-bar{background:linear-gradient(90deg,var(--feeder-color),#9b59b6);}.blower-bar{background:linear-gradient(90deg,var(--blower-color),#16a085);}.maintenance-bar{background:linear-gradient(90deg,var(--maintenance-color),#8e44ad);}.clean-bar{background:linear-gradient(90deg,var(--clean-color),#d35400);}.control-group{margin-bottom:25px;}.slider-container{background:rgba(0,0,0,0.25);border-radius:12px;padding:18px;margin:18px 0;}.slider-label{display:flex;justify-content:space-between;margin-bottom:12px;font-size:1.1rem;}input[type="range"]{width:100%;height:30px;-webkit-appearance:none;background:rgba(255,255,255,0.1);border-radius:15px;outline:none;}input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:30px;height:30px;border-radius:50%;background:#3498db;cursor:pointer;box-shadow:0 0 10px rgba(52,152,219,0.5);transition:all 0.3s;}input[type="range"]::-webkit-slider-thumb:hover{transform:scale(1.1);background:#2980b9;}input[type="range"]:active{transform:translateY(1px);}button{padding:16px;border:none;border-radius:12px;background:#3498db;color:white;font-size:1.15rem;font-weight:bold;cursor:pointer;transition:all 0.3s;margin:8px 0;display:flex;align-items:center;justify-content:center;gap:10px;width:100%;}button:hover{background:#2980b9;transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,0,0,0.3);}button:active{transform:translateY(1px);}button.power-off{background:#e74c3c;}button.power-off:hover{background:#c0392b;}button.warning{background:#f39c12;}button.warning:hover{background:#e67e22;}button.success{background:#2ecc71;}button.success:hover{background:#27ae60;}.mode-buttons{display:flex;gap:12px;margin:18px 0;}.mode-button{flex:1;text-align:center;padding:16px;border-radius:12px;background:rgba(255,255,255,0.1);cursor:pointer;transition:all 0.3s;display:flex;flex-direction:column;align-items:center;gap:10px;}.mode-button:hover{background:rgba(255,255,255,0.15);}.mode-button.active{background:#3498db;box-shadow:0 0 20px rgba(52,152,219,0.4);}.log{background:rgba(0,0,0,0.25);border-radius:12px;padding:18px;height:200px;overflow-y:auto;margin-top:20px;}.log-entry{padding:10px 0;border-bottom:1px solid rgba(255,255,255,0.1);font-size:0.95rem;display:flex;}.log-time{color:#3498db;min-width:70px;font-weight:bold;}.chart-container{height:300px;margin-top:20px;background:rgba(0,0,0,0.2);border-radius:12px;padding:15px;position:relative;}.tabs{display:flex;gap:10px;margin-bottom:15px;flex-wrap:wrap;}.tab{padding:10px 20px;border-radius:8px;background:rgba(255,255,255,0.1);cursor:pointer;transition:all 0.3s;}.tab.active{background:#3498db;}.stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;}.stat-card{background:rgba(0,0,0,0.2);border-radius:12px;padding:15px;}.stat-title{font-size:1.1rem;margin-bottom:10px;color:#3498db;text-align:center;}.stat-value{font-size:1.8rem;font-weight:bold;text-align:center;margin:10px 0;}.stat-sub{display:flex;justify-content:space-between;font-size:0.9rem;color:#bbb;}.diagram{display:flex;justify-content:space-around;align-items:center;margin:25px 0;padding:20px;background:rgba(0,0,0,0.2);border-radius:15px;flex-wrap:wrap;gap:10px;}.diagram-component{text-align:center;position:relative;min-width:100px;}.diagram-component i{font-size:2.8rem;margin-bottom:10px;color:#3498db;}.diagram-arrow{font-size:2.5rem;color:#3498db;}.ignition-container{display:flex;flex-direction:column;align-items:center;margin:20px 0;}.flame-indicator{width:120px;height:120px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:40px;transition:all 0.5s ease;margin-bottom:15px;position:relative;overflow:hidden;}.flame-indicator.on{background:var(--flame-on);box-shadow:0 0 30px var(--flame-on);animation:flamePulse 1.5s infinite;}.flame-indicator.off{background:var(--flame-off);}.igniter-indicator{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:40px;background:var(--igniter-heating);opacity:0.8;animation:heatingPulse 2s infinite;}.igniter-indicator.ready{background:var(--igniter-ready);animation:readyPulse 1s infinite;}@keyframes flamePulse{0%{box-shadow:0 0 15px var(--flame-on);}50%{box-shadow:0 0 40px var(--flame-on);}100%{box-shadow:0 0 15px var(--flame-on);}}@keyframes heatingPulse{0%{box-shadow:0 0 10px var(--igniter-heating);opacity:0.6;}50%{box-shadow:0 0 25px var(--igniter-heating);opacity:0.9;}100%{box-shadow:0
0 10px var(--igniter-heating);opacity:0.6;}}@keyframes readyPulse{0%{box-shadow:0 0 10px var(--igniter-ready);opacity:0.7;}50%{box-shadow:0 0 30px var(--igniter-ready);opacity:1;}100%{box-shadow:0
0 10px var(--igniter-ready);opacity:0.7;}}.ignition-status{font-size:1.3rem;font-weight:bold;text-align:center;padding:10px 20px;border-radius:20px;margin-top:10px;}.ignition-status.heating{background:rgba(255,152,0,0.2);color:#ff9800;}.ignition-status.ready{background:rgba(156,39,176,0.2);color:#9c27b0;}.ignition-status.on{background:rgba(255,87,34,0.2);color:#ff5722;}.ignition-status.off{background:rgba(85,85,85,0.2);color:#bbb;}.ignition-timer{display:flex;align-items:center;justify-content:center;gap:10px;margin:15px 0;font-size:1.2rem;}.timer-value{font-weight:bold;color:#f39c12;min-width:40px;text-align:center;}.ignition-progress{display:flex;align-items:center;justify-content:center;gap:10px;margin:15px 0;}.progress-circle{width:100px;height:100px;border-radius:50%;background:conic-gradient(#ff9800 0%,#ff5722 0%,rgba(0,0,0,0.3) 0%);display:flex;align-items:center;justify-content:center;position:relative;}.progress-text{font-size:1.5rem;font-weight:bold;position:absolute;}.temperature-display{font-size:1.1rem;margin-top:5px;color:#ff9800;}footer{text-align:center;margin-top:40px;padding:25px;color:#7f8c8d;font-size:1rem;border-top:1px solid rgba(255,255,255,0.1);}.auto-clean{display:flex;align-items:center;gap:10px;margin:15px 0;background:rgba(0,0,0,0.25);border-radius:12px;padding:18px;justify-content:space-between;}.auto-clean-label{display:flex;align-items:center;gap:10px;font-size:1.1rem;}.clean-timer{background:rgba(255,255,255,0.1);border-radius:8px;padding:8px 15px;font-weight:bold;}.switch{position:relative;display:inline-block;width:60px;height:30px;}.switch input{opacity:0;width:0;height:0;}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s;border-radius:30px;}.slider:before{position:absolute;content:"";height:22px;width:22px;left:4px;bottom:4px;background-color:white;transition:.4s;border-radius:50%;}input:checked+.slider{background-color:#3498db;}input:checked+.slider:before{transform:translateX(30px);}.feeder-info,.blower-info{display:flex;align-items:center;gap:15px;margin:15px 0;}.feeder-icon,.blower-icon{font-size:2rem;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;}.feeder-icon{background:rgba(142,68,173,0.2);color:var(--feeder-color);}.blower-icon{background:rgba(26,188,156,0.2);color:var(--blower-color);}.feeder-details,.blower-details{flex:1;}.control-header{display:flex;align-items:center;gap:10px;margin-bottom:10px;font-size:1.1rem;}.fixed-blower{background:rgba(0,0,0,0.25);border-radius:12px;padding:15px;text-align:center;margin-top:15px;}.status-indicator{display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:8px;}.status-active{background-color:var(--success);box-shadow:0 0 8px var(--success);}.status-inactive{background-color:var(--danger);}.status-warning{background-color:var(--warning);box-shadow:0 0 8px var(--warning);}.status-ready{background-color:var(--igniter-ready);box-shadow:0 0 8px var(--igniter-ready);}.time-control{display:flex;justify-content:space-between;align-items:center;margin:10px 0;gap:15px;}.time-input{flex:1;background:rgba(0,0,0,0.2);border-radius:10px;padding:10px;text-align:center;}.time-input label{display:block;margin-bottom:5px;color:#3498db;font-weight:bold;}.time-input input{width:100%;padding:8px;border-radius:8px;border:none;background:rgba(255,255,255,0.1);color:white;text-align:center;font-size:1.1rem;}.feeder-cycle{display:flex;flex-direction:column;align-items:center;margin-top:15px;background:rgba(0,0,0,0.2);border-radius:12px;padding:15px;}.cycle-progress{width:100%;height:20px;background:rgba(0,0,0,0.3);border-radius:10px;margin:10px 0;overflow:hidden;position:relative;}.cycle-progress-bar{height:100%;border-radius:10px;transition:width 0.5s;}.cycle-status{font-weight:bold;margin-top:5px;display:flex;align-items:center;gap:5px;}.cycle-status.on{color:#2ecc71;}.cycle-status.off{color:#e74c3c;}.maintenance-indicator{padding:5px 10px;border-radius:15px;font-weight:bold;}.maintenance-active{background:rgba(46,204,113,0.2);color:#2ecc71;}.maintenance-inactive{background:rgba(231,76,60,0.2);color:#e74c3c;}.edit-clean-container{background:rgba(0,0,0,0.25);border-radius:12px;padding:15px;margin-top:15px;}.edit-clean-header{display:flex;align-items:center;gap:10px;margin-bottom:15px;font-size:1.1rem;}.edit-clean-fields{display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:10px;align-items:center;}.edit-time-input{text-align:center;}.edit-time-input label{display:block;margin-bottom:5px;color:#3498db;}.edit-time-input input{width:100%;padding:8px;border-radius:8px;border:none;background:rgba(255,255,255,0.1);color:white;text-align:center;font-size:1.1rem;}#update-clean-btn{height:40px;align-self:flex-end;margin-bottom:5px;padding:8px 15px;font-size:0.9rem;}.notification-badge{position:absolute;top:-5px;right:-5px;background:var(--danger);color:white;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:0.7rem;font-weight:bold;}.notification-container{position:relative;}.blower-info-box{background:rgba(0,0,0,0.2);border-radius:12px;padding:15px;margin-top:15px;text-align:center;}.blower-cycle{display:flex;flex-direction:column;align-items:center;margin-top:15px;background:rgba(0,0,0,0.2);border-radius:12px;padding:15px;}.blower-status{font-weight:bold;margin-top:5px;display:flex;align-items:center;gap:5px;}.blower-status.on{color:#2ecc71;}.blower-status.off{color:#e74c3c;}.blower-progress{width:100%;height:20px;background:rgba(0,0,0,0.3);border-radius:10px;margin:10px 0;overflow:hidden;position:relative;}.blower-progress-bar{height:100%;background:linear-gradient(90deg,var(--blower-color),#16a085);transition:width 0.5s;}.control-btn{padding:8px 15px;border-radius:8px;background:rgba(255,255,255,0.1);cursor:pointer;transition:all 0.3s;}.control-btn:hover{background:rgba(255,255,255,0.15);}.control-btn.active{background:#3498db;}.blower-mode-info{margin-top:10px;padding:8px;border-radius:8px;background:rgba(0,0,0,0.2);}.mode-direct{background:rgba(231,76,60,0.2);color:#e74c3c;}.mode-inverter{background:rgba(46,204,113,0.2);color:#2ecc71;}.system-status{display:flex;justify-content:center;gap:15px;margin-top:15px;}.status-badge{padding:8px 15px;border-radius:20px;font-weight:bold;display:flex;align-items:center;gap:8px;}.status-good{background:rgba(46,204,113,0.2);color:#2ecc71;}.status-warning{background:rgba(243,156,18,0.2);color:#f39c12;}.status-error{background:rgba(231,76,60,0.2);color:#e74c3c;}.device-status{display:flex;justify-content:space-around;margin-top:15px;padding:10px;background:rgba(0,0,0,0.2);border-radius:12px;}.status-item{text-align:center;}.chart-controls{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:15px;background:rgba(0,0,0,0.2);border-radius:10px;padding:10px;}.dataset-toggle{display:flex;align-items:center;gap:5px;padding:5px 10px;border-radius:20px;background:rgba(255,255,255,0.1);cursor:pointer;}.dataset-toggle.active{background:rgba(52,152,219,0.3);}.chart-color-indicator{width:15px;height:15px;border-radius:50%;}.history-stats{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-top:20px;}.history-card{background:rgba(0,0,0,0.2);border-radius:12px;padding:15px;}.history-title{font-size:1.1rem;margin-bottom:10px;color:#3498db;text-align:center;}.history-value{font-size:1.5rem;font-weight:bold;text-align:center;margin:10px 0;}.cost-calculation{background:rgba(0,0,0,0.15);border-radius:12px;padding:15px;margin-top:15px;}.cost-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.1);}.cost-total{font-weight:bold;font-size:1.2rem;margin-top:10px;padding-top:10px;border-top:2px solid rgba(255,255,255,0.2);}.efficiency-gauge{width:100%;height:30px;background:rgba(0,0,0,0.3);border-radius:15px;overflow:hidden;position:relative;}.gauge-fill{height:100%;background:linear-gradient(90deg,#3498db,#2ecc71);transition:width 0.5s;}.gauge-label{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:white;font-weight:bold;text-shadow:0 0 3px rgba(0,0,0,0.8);}.chart-switcher{display:flex;gap:10px;margin-bottom:15px;background:rgba(0,0,0,0.2);border-radius:10px;padding:10px;}.chart-switch{padding:8px 15px;border-radius:20px;background:rgba(255,255,255,0.1);cursor:pointer;transition:all 0.3s;}.chart-switch.active{background:rgba(52,152,219,0.3);}.zoom-controls{position:absolute;top:10px;right:10px;display:flex;gap:5px;z-index:10;background:rgba(0,0,0,0.5);border-radius:20px;padding:5px;}.zoom-btn{width:30px;height:30px;border-radius:50%;background:#3498db;color:white;display:flex;align-items:center;justify-content:center;cursor:pointer;font-weight:bold;font-size:18px;transition:background 0.3s;}.zoom-btn:hover{background:#2980b9;}.zoom-btn.reset{background:#e74c3c;}.zoom-btn.reset:hover{background:#c0392b;}.history-range{display:flex;gap:10px;margin-bottom:15px;background:rgba(0,0,0,0.2);border-radius:10px;padding:10px;}.history-btn{padding:8px 15px;border-radius:20px;background:rgba(255,255,255,0.1);cursor:pointer;transition:all 0.3s;}.history-btn.active{background:rgba(52,152,219,0.3);}.tab-content{display:none;}.tab-content.active{display:block;}.instructions{background:rgba(0,0,0,0.2);border-radius:15px;padding:20px;margin-top:20px;}.instructions h3{color:#3498db;margin-bottom:15px;display:flex;align-items:center;gap:10px;}.instructions ul{padding-left:25px;}.instructions li{margin-bottom:10px;line-height:1.5;}.instructions strong{color:#3498db;}.controls{display:flex;justify-content:center;align-items:center;gap:0.8rem;margin:1.2rem 0;flex-wrap:wrap;}.control-btn{padding:0.6rem 1.2rem;background-color:rgba(0,0,0,0.25);border:2px solid var(--secondary);border-radius:30px;color:var(--secondary);font-weight:600;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;gap:0.5rem;}.control-btn:hover{background-color:var(--secondary);color:white;}.date-display{font-weight:600;color:white;background-color:rgba(0,0,0,0.3);padding:0.5rem 1.2rem;border-radius:30px;min-width:250px;text-align:center;}.tab-btn{padding:0.7rem 1.2rem;background-color:rgba(0,0,0,0.25);border:none;border-radius:30px;cursor:pointer;font-weight:600;transition:all 0.3s ease;display:flex;align-items:center;gap:8px;color:white;}.tab-btn.active{background-color:var(--secondary);color:white;}.tab-btn:hover:not(.active){background-color:rgba(255,255,255,0.15);}.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1rem;margin-top:1.5rem;}.stat-card-monitor{background:linear-gradient(135deg,var(--secondary),var(--primary));color:white;padding:1rem;border-radius:8px;text-align:center;transition:transform 0.3s ease;}.stat-card-monitor:hover{transform:scale(1.03);}.stat-card-monitor .value{font-size:1.8rem;font-weight:700;margin:0.5rem 0;}.stat-card-monitor .label{font-size:0.9rem;opacity:0.9;display:flex;align-items:center;justify-content:center;gap:5px;}.stat-card-monitor i{font-size:1.2rem;}.correction-info{background:rgba(0,0,0,0.25);border-radius:12px;padding:15px;margin-top:15px;text-align:center;}.correction-value{font-size:1.5rem;font-weight:bold;color:#f39c12;}.correction-controls{display:flex;gap:10px;margin-top:10px;}.correction-input{flex:1;background:rgba(0,0,0,0.2);border:1px solid #f39c12;border-radius:8px;padding:8px;color:white;text-align:center;font-size:1.1rem;}.correction-btn{padding:8px 15px;border-radius:8px;background:#f39c12;color:white;border:none;cursor:pointer;font-weight:bold;transition:all 0.3s;}.correction-btn:hover{background:#e67e22;}.reset-stats-btn{background:#9b59b6;margin-top:15px;}.reset-stats-btn:hover{background:#8e44ad;}/* MQTT Configuration Panel */.mqtt-config{background:rgba(0,0,0,0.25);border-radius:15px;padding:20px;margin-bottom:20px;}.mqtt-config h3{color:#3498db;margin-bottom:15px;display:flex;align-items:center;gap:10px;}.mqtt-form{display:grid;grid-template-columns:1fr 1fr;gap:15px;}.mqtt-field{margin-bottom:15px;}.mqtt-field label{display:block;margin-bottom:5px;color:#3498db;font-weight:bold;}.mqtt-field input{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.2);background:rgba(0,0,0,0.2);color:white;}.mqtt-actions{display:flex;gap:10px;margin-top:10px;grid-column:span 2;}.mqtt-status{display:flex;align-items:center;gap:10px;padding:10px;border-radius:8px;background:rgba(0,0,0,0.3);margin-top:15px;}.mqtt-indicator{width:12px;height:12px;border-radius:50%;background-color:var(--mqtt-disconnected);}.mqtt-indicator.connected{background-color:var(--mqtt-connected);box-shadow:0 0 8px var(--mqtt-connected);}.mqtt-topic-list{margin-top:20px;background:rgba(0,0,0,0.2);border-radius:12px;padding:15px;}.topic-item{padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.1);font-family:monospace;display:flex;justify-content:space-between;}.topic-item:last-child{border-bottom:none;}.mqtt-log{background:rgba(0,0,0,0.2);border-radius:12px;padding:15px;margin-top:15px;height:150px;overflow-y:auto;}.mqtt-log-entry{font-family:monospace;font-size:0.9rem;padding:5px 0;border-bottom:1px solid rgba(255,255,255,0.1);}.mqtt-log-entry:last-child{border-bottom:none;}.mqtt-log-topic{color:#3498db;font-weight:bold;}.mqtt-log-message{color:#f39c12;}
        /* Dodano dla poprawy obsługi dotyku na canvas */
        canvas {
            touch-action: none;
        }
    </style>
    <script src="cdn.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-fire"></i> Sterowanie Piecem Peletowym ESP32</h1>
            <p class="subtitle">Interfejs użytkownika do monitorowania i kontroli pieca na pelet z ESP32 i MQTT.</p>
        </header>

        <div class="dashboard">
            <div class="card">
                <h2 class="card-title"><i class="fas fa-info-circle"></i> Status Pieca</h2>
                <div class="status-grid">
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-thermometer-half"></i> Temp. Kotła</div>
                        <div class="status-value" id="boilerTemp">--.-</div>
                        <div class="status-unit">°C</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-fan"></i> Moc Dmuchawy</div>
                        <div class="status-value" id="blowerPower">--</div>
                        <div class="status-unit">%</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-fire-alt"></i> Stan Płomienia</div>
                        <div class="status-value" id="flameStatus">--</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-tint"></i> Delta Temp.</div>
                        <div class="status-value" id="deltaTemp">--.-</div>
                        <div class="status-unit">°C</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-tachometer-alt"></i> Obroty Dmuchawy</div>
                        <div class="status-value" id="blowerRPM">--</div>
                        <div class="status-unit">RPM</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-wrench"></i> Tryb</div>
                        <div class="status-value" id="currentMode">--</div>
                    </div>
                </div>

                <div class="ignition-container">
                    <div class="flame-indicator off" id="flame-indicator">
                        <i class="fas fa-fire"></i>
                        <div class="igniter-indicator" id="igniter-indicator" style="display:none;">
                            <i class="fas fa-bolt"></i>
                        </div>
                    </div>
                    <div class="ignition-status off" id="ignition-status-text">Wyłączony</div>
                    <div class="ignition-timer" id="ignition-timer" style="display: none;">
                        <i class="fas fa-hourglass-half"></i>
                        Pozostało: <span class="timer-value" id="ignition-countdown">--:--</span>
                    </div>
                     <div class="ignition-progress" id="ignition-progress" style="display: none;">
                        <div class="progress-circle" id="ignition-progress-circle">
                            <span class="progress-text" id="ignition-progress-text">0%</span>
                        </div>
                        <div class="temperature-display" id="current-ignition-temp"></div>
                    </div>
                </div>


                <div class="control-group">
                    <h3 class="card-title"><i class="fas fa-cogs"></i> Kontrola</h3>
                     <div class="mode-buttons">
                        <button id="modeOff" class="mode-button power-off"><i class="fas fa-power-off"></i> Wyłącz</button>
                        <button id="modeManual" class="mode-button"><i class="fas fa-hand-paper"></i> Tryb Ręczny</button>
                        <button id="modeAuto" class="mode-button"><i class="fas fa-sync-alt"></i> Tryb Auto</button>
                    </div>

                    <div class="slider-container">
                        <div class="slider-label">
                            <label for="targetTempSlider"><i class="fas fa-temperature-high"></i> Temp. Docelowa:</label>
                            <span id="targetTempDisplay">20°C</span>
                        </div>
                        <input type="range" id="targetTempSlider" min="10" max="80" value="20">
                    </div>

                    <div class="slider-container">
                        <div class="slider-label">
                            <label for="fanPowerSlider"><i class="fas fa-fan"></i> Moc Dmuchawy (%):</label>
                            <span id="fanPowerDisplay">50%</span>
                        </div>
                        <input type="range" id="fanPowerSlider" min="0" max="100" value="50">
                    </div>

                    <div class="slider-container">
                        <div class="slider-label">
                            <label for="feederSpeedSlider"><i class="fas fa-drumstick-bite"></i> Prędkość Podajnika (s/cykl):</label>
                            <span id="feederSpeedDisplay">5s</span>
                        </div>
                        <input type="range" id="feederSpeedSlider" min="1" max="60" value="5">
                    </div>

                    <div class="time-control">
                        <div class="time-input">
                            <label for="ignitionTime"><i class="fas fa-hourglass-start"></i> Czas Rozpalania (s)</label>
                            <input type="number" id="ignitionTime" value="120" min="10" max="600">
                        </div>
                        <div class="time-input">
                            <label for="stabilizationTime"><i class="fas fa-hourglass-half"></i> Czas Stabilizacji (s)</label>
                            <input type="number" id="stabilizationTime" value="300" min="10" max="600">
                        </div>
                    </div>

                    <button id="igniteButton" class="success"><i class="fas fa-fire"></i> Rozpal Piec</button>
                    <button id="stopBurnerButton" class="power-off"><i class="fas fa-stop-circle"></i> Zgaś Palnik</button>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title"><i class="fas fa-chart-line"></i> Dane Operacyjne</h2>
                <div class="status-grid">
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-bolt"></i> Moc Grzałki</div>
                        <div class="status-value" id="igniterPower">--</div>
                        <div class="status-unit">%</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-stopwatch"></i> Czas Palnika</div>
                        <div class="status-value" id="burnerHoursTotal">--</div>
                        <div class="status-unit">min</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-temperature-low"></i> Temp. Spalin</div>
                        <div class="status-value" id="exhaustTemp">--.-</div>
                        <div class="status-unit">°C</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-wifi"></i> RSSI WiFi</div>
                        <div class="status-value" id="wifiRSSI">--</div>
                        <div class="status-unit">dBm</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-clock"></i> Czas Pracy (min)</div>
                        <div class="status-value" id="operatingTime">--</div>
                        <div class="status-unit">min</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-sync"></i> Reconnects</div>
                        <div class="status-value" id="reconnectCount">--</div>
                    </div>
                </div>

                <div class="mqtt-config">
                    <h3 class="card-title"><i class="fas fa-ethernet"></i> Konfiguracja MQTT</h3>
                    <div class="mqtt-form">
                        <div class="mqtt-field">
                            <label for="mqttBroker">Broker MQTT</label>
                            <input type="text" id="mqttBroker" value="broker.emqx.io" disabled>
                        </div>
                        <div class="mqtt-field">
                            <label for="mqttPort">Port</label>
                            <input type="number" id="mqttPort" value="8083">
                        </div>
                        <div class="mqtt-field">
                            <label for="mqttUser">Użytkownik</label>
                            <input type="text" id="mqttUser" value="agentsan007">
                        </div>
                        <div class="mqtt-field">
                            <label for="mqttPassword">Hasło</label>
                            <input type="password" id="mqttPassword" value="Sanders24*">
                        </div>
                        <div class="mqtt-field">
                            <label for="mqttTopicState">Temat Stanu</label>
                            <input type="text" id="mqttTopicState" value="pellet/boiler/state">
                        </div>
                        <div class="mqtt-field">
                            <label for="mqttTopicControl">Temat Kontroli</label>
                            <input type="text" id="mqttTopicControl" value="pellet/boiler/control">
                        </div>
                    </div>
                    <div class="mqtt-actions">
                        <button id="mqttConnectBtn" class="success"><i class="fas fa-link"></i> Połącz MQTT</button>
                        <button id="mqttDisconnectBtn" class="power-off"><i class="fas fa-unlink"></i> Rozłącz MQTT</button>
                    </div>
                    <div class="mqtt-status">
                        <span id="mqttStatusIndicator" class="mqtt-indicator disconnected"></span>
                        Status: <span id="mqttStatusText">Rozłączono</span>
                    </div>
                </div>

                <div class="control-group">
                    <h3 class="card-title"><i class="fas fa-tasks"></i> Ustawienia Zaawansowane</h3>

                    <div class="feeder-cycle">
                        <div class="control-header">
                            <i class="fas fa-cookie-bite"></i> Cykl Podajnika
                            <span id="feederCycleStatus" class="cycle-status off"></span>
                        </div>
                        <div class="cycle-progress">
                            <div class="cycle-progress-bar" id="feederCycleProgressBar" style="width: 0%;"></div>
                        </div>
                        <div class="cycle-info" id="feederCycleInfo">--s / --s</div>
                    </div>

                    <div class="blower-cycle">
                        <div class="control-header">
                            <i class="fas fa-wind"></i> Przedmuch Dmuchawy
                            <span id="blowerPurgeStatus" class="blower-status off"></span>
                        </div>
                        <div class="cycle-progress">
                            <div class="blower-progress-bar" id="blowerPurgeProgressBar" style="width: 0%;"></div>
                        </div>
                        <div class="cycle-info" id="blowerPurgeInfo">--s / --s</div>
                        <div class="time-control" style="margin-top:15px;">
                            <div class="time-input">
                                <label for="blowerPurgeOnTime"><i class="fas fa-play-circle"></i> Czas ON (s)</label>
                                <input type="number" id="blowerPurgeOnTime" value="10" min="1" max="60">
                            </div>
                            <div class="time-input">
                                <label for="blowerPurgeOffTime"><i class="fas fa-pause-circle"></i> Czas OFF (s)</label>
                                <input type="number" id="blowerPurgeOffTime" value="300" min="1" max="3600">
                            </div>
                        </div>
                        <div class="slider-container">
                            <div class="slider-label">
                                <label for="blowerPurgeManualPower"><i class="fas fa-fan"></i> Moc Przedmuchu (%):</label>
                                <span id="blowerPurgeManualPowerDisplay">50%</span>
                            </div>
                            <input type="range" id="blowerPurgeManualPower" min="0" max="100" value="50">
                        </div>
                         <div class="blower-mode-info" id="blowerPurgeModeInfo">
                            Tryb: <span id="blowerPurgeModeText">--</span>
                        </div>
                        <div class="mode-buttons">
                            <button id="blowerPurgeModeOff" class="mode-button"><i class="fas fa-power-off"></i> Wyłącz</button>
                            <button id="blowerPurgeModeDirect" class="mode-button"><i class="fas fa-bolt"></i> Tryb Bezpośredni</button>
                            <button id="blowerPurgeModeInverter" class="mode-button"><i class="fas fa-sync-alt"></i> Tryb Inwerter</button>
                        </div>
                    </div>


                     <div class="auto-clean">
                        <div class="auto-clean-label">
                            <i class="fas fa-broom"></i> Auto-Czyszczenie:
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="autoCleanToggle">
                            <span class="slider"></span>
                        </label>
                    </div>

                    <div class="edit-clean-container">
                        <div class="edit-clean-header">
                            <i class="fas fa-cogs"></i> Edytuj Auto-Czyszczenie
                        </div>
                        <div class="edit-clean-fields">
                            <div class="edit-time-input">
                                <label for="cleanIntervalHours">Interwał (h)</label>
                                <input type="number" id="cleanIntervalHours" value="1" min="1" max="24">
                            </div>
                             <div class="edit-time-input">
                                <label for="cleanDurationMinutes">Czas (min)</label>
                                <input type="number" id="cleanDurationMinutes" value="5" min="1" max="60">
                            </div>
                             <div class="edit-time-input">
                                <label for="cleanBlowerPower">Moc Dm. (%)</label>
                                <input type="number" id="cleanBlowerPower" value="100" min="0" max="100">
                            </div>
                            <button id="updateCleanBtn" class="success"><i class="fas fa-save"></i> Zapisz</button>
                        </div>
                    </div>

                    <div class="auto-clean">
                        <div class="auto-clean-label">
                            <i class="fas fa-hand-sparkles"></i> Tryb Konserwacji:
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="maintenanceModeToggle">
                            <span class="slider"></span>
                        </label>
                         <span class="maintenance-indicator" id="maintenanceModeIndicator">Nieaktywny</span>
                    </div>

                    <div class="slider-container" id="maintenanceFeedOnTimeSliderContainer">
                        <div class="slider-label">
                            <label for="maintenanceFeedOnTime"><i class="fas fa-arrow-alt-circle-right"></i> Podajnik ON (s):</label>
                            <span id="maintenanceFeedOnTimeDisplay">--s</span>
                        </div>
                        <input type="range" id="maintenanceFeedOnTime" min="0" max="60" value="0">
                    </div>

                    <div class="slider-container" id="maintenanceFeedOffTimeSliderContainer">
                        <div class="slider-label">
                            <label for="maintenanceFeedOffTime"><i class="fas fa-arrow-alt-circle-left"></i> Podajnik OFF (s):</label>
                            <span id="maintenanceFeedOffTimeDisplay">--s</span>
                        </div>
                        <input type="range" id="maintenanceFeedOffTime" min="0" max="60" value="0">
                    </div>

                    <div class="slider-container" id="blowerMaintenanceManualPowerSliderContainer">
                        <div class="slider-label">
                            <label for="blowerMaintenanceManualPower"><i class="fas fa-fan"></i> Dmuchawa Konserwacja (%):</label>
                            <span id="blowerMaintenanceManualPowerDisplay">--%</span>
                        </div>
                        <input type="range" id="blowerMaintenanceManualPower" min="0" max="100" value="0">
                    </div>

                     <div class="blower-info-box">
                        <div class="control-header">
                            <i class="fas fa-fan"></i> Blower Manual Control
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="blowerManualControlToggle">
                            <span class="slider"></span>
                        </label>
                         <div class="blower-mode-info" id="blowerControlModeInfo">
                            Tryb: <span id="blowerControlModeText">--</span>
                        </div>
                        <div class="mode-buttons">
                            <button id="blowerManualControlModeOff" class="mode-button"><i class="fas fa-power-off"></i> Wyłącz</button>
                            <button id="blowerManualControlModeDirect" class="mode-button"><i class="fas fa-bolt"></i> Tryb Bezpośredni</button>
                            <button id="blowerManualControlModeInverter" class="mode-button"><i class="fas fa-sync-alt"></i> Tryb Inwerter</button>
                        </div>
                    </div>

                    <div class="slider-container">
                        <div class="slider-label">
                            <label for="blowerWorkPowerSlider"><i class="fas fa-cogs"></i> Moc Dmuchawy w Trybie Pracy (%):</label>
                            <span id="blowerWorkPowerDisplay">50%</span>
                        </div>
                        <input type="range" id="blowerWorkPowerSlider" min="0" max="100" value="50">
                    </div>

                     <div class="correction-info">
                        <div class="card-title"><i class="fas fa-ruler-combined"></i> Korekcja Temperatury</div>
                        <div class="correction-value" id="tempCorrectionDisplay">0.0 °C</div>
                        <div class="correction-controls">
                            <input type="number" id="tempCorrectionInput" value="0.0" step="0.1">
                            <button id="setTempCorrectionBtn" class="success"><i class="fas fa-save"></i> Zapisz</button>
                        </div>
                    </div>

                    <button id="resetStatisticsButton" class="reset-stats-btn"><i class="fas fa-chart-bar"></i> Resetuj Statystyki</button>
                     <button id="resetAllDataButton" class="danger"><i class="fas fa-trash-alt"></i> Resetuj Wszystkie Dane</button>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="tabs">
                <div class="tab active" data-tab="chart-tab">
                    <i class="fas fa-chart-area"></i> Wykresy Temperatur
                </div>
                <div class="tab" data-tab="diagram-tab">
                    <i class="fas fa-project-diagram"></i> Schemat Pieca
                </div>
                 <div class="tab" data-tab="history-tab">
                    <i class="fas fa-history"></i> Historia i Koszty
                </div>
                 <div class="tab" data-tab="instructions-tab">
                    <i class="fas fa-book"></i> Instrukcje
                </div>
            </div>

            <div id="chart-tab" class="tab-content active">
                <h2 class="card-title"><i class="fas fa-chart-area"></i> Wykresy Temperatur</h2>
                 <div class="chart-switcher">
                    <div class="chart-switch active" data-chart="live">Live</div>
                    <div class="chart-switch" data-chart="day">24h</div>
                    <div class="chart-switch" data-chart="week">7 dni</div>
                    <div class="chart-switch" data-chart="month">30 dni</div>
                </div>
                <div class="chart-controls">
                    <div class="dataset-toggle active" data-dataset="boilerTemp"><span class="chart-color-indicator" style="background-color: #3498db;"></span> Temp. Kotła</div>
                    <div class="dataset-toggle active" data-dataset="exhaustTemp"><span class="chart-color-indicator" style="background-color: #e74c3c;"></span> Temp. Spalin</div>
                    <div class="dataset-toggle active" data-dataset="targetTemp"><span class="chart-color-indicator" style="background-color: #2ecc71;"></span> Temp. Docelowa</div>
                </div>
                <div class="chart-container">
                    <canvas id="myChart"></canvas>
                     <div class="zoom-controls">
                        <button class="zoom-btn" id="zoomInBtn"><i class="fas fa-search-plus"></i></button>
                        <button class="zoom-btn" id="zoomOutBtn"><i class="fas fa-search-minus"></i></button>
                        <button class="zoom-btn reset" id="resetZoomBtn"><i class="fas fa-undo"></i></button>
                    </div>
                </div>
                <div class="log" id="chartLog">
                    <div class="log-entry"><span class="log-time">--:--:--</span> <span class="log-message">Oczekiwanie na dane z wykresu...</span></div>
                </div>
            </div>

            <div id="diagram-tab" class="tab-content">
                <h2 class="card-title"><i class="fas fa-project-diagram"></i> Schemat Pieca</h2>
                <div class="diagram">
                    <div class="diagram-component">
                        <i class="fas fa-cloud"></i>
                        <p>Internet</p>
                    </div>
                    <i class="fas fa-long-arrow-alt-right diagram-arrow"></i>
                    <div class="diagram-component">
                        <i class="fas fa-server"></i>
                        <p>Broker MQTT</p>
                    </div>
                    <i class="fas fa-long-arrow-alt-right diagram-arrow"></i>
                    <div class="diagram-component">
                        <i class="fas fa-microchip"></i>
                        <p>ESP32</p>
                    </div>
                    <i class="fas fa-long-arrow-alt-right diagram-arrow"></i>
                    <div class="diagram-component">
                        <i class="fas fa-fire"></i>
                        <p>Piec</p>
                    </div>
                </div>
                <div class="system-status">
                    <div class="status-badge" id="wifiStatusBadge">
                        <i class="fas fa-wifi"></i> WiFi: <span id="wifiStatusText">Łączenie...</span>
                    </div>
                    <div class="status-badge" id="mqttStatusBadge">
                        <i class="fas fa-cloud"></i> MQTT: <span id="mqttStatusTextDiagram">Łączenie...</span>
                    </div>
                    <div class="status-badge" id="espStatusBadge">
                        <i class="fas fa-microchip"></i> ESP32: <span id="espStatusText">Brak danych</span>
                    </div>
                </div>
                 <div class="device-status">
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-thermometer-half"></i> Czujnik Temp. Kotła</div>
                        <div class="status-value" id="boilerSensorStatus">--</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-temperature-low"></i> Czujnik Temp. Spalin</div>
                        <div class="status-value" id="exhaustSensorStatus">--</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-bolt"></i> Grzałka</div>
                        <div class="status-value" id="igniterStatus">--</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-fan"></i> Dmuchawa</div>
                        <div class="status-value" id="blowerStatusDevice">--</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label"><i class="fas fa-cookie-bite"></i> Podajnik</div>
                        <div class="status-value" id="feederStatus">--</div>
                    </div>
                </div>
            </div>

             <div id="history-tab" class="tab-content">
                <h2 class="card-title"><i class="fas fa-history"></i> Historia i Koszty</h2>
                <div class="history-range">
                    <div class="history-btn active" data-range="day">Ostatnie 24h</div>
                    <div class="history-btn" data-range="week">Ostatnie 7 dni</div>
                    <div class="history-btn" data-range="month">Ostatnie 30 dni</div>
                </div>
                <div class="history-stats">
                    <div class="history-card">
                        <div class="history-title"><i class="fas fa-fire-alt"></i> Czas pracy palnika</div>
                        <div class="history-value" id="historyBurnerTime">-- min</div>
                    </div>
                    <div class="history-card">
                        <div class="history-title"><i class="fas fa-cookie-bite"></i> Zużycie pelletu</div>
                        <div class="history-value" id="historyPelletConsumption">-- kg</div>
                    </div>
                     <div class="history-card">
                        <div class="history-title"><i class="fas fa-fan"></i> Śr. Moc Dmuchawy</div>
                        <div class="history-value" id="historyAvgBlowerPower">-- %</div>
                    </div>
                    <div class="history-card">
                        <div class="history-title"><i class="fas fa-thermometer-half"></i> Śr. Temp. Kotła</div>
                        <div class="history-value" id="historyAvgBoilerTemp">--.- °C</div>
                    </div>
                </div>

                <div class="cost-calculation">
                    <h3 class="card-title"><i class="fas fa-dollar-sign"></i> Kalkulacja Kosztów</h3>
                    <div class="cost-row">
                        <span>Cena pelletu (PLN/kg):</span>
                        <input type="number" id="pelletPriceInput" value="1.50" min="0.01" step="0.01" style="width: 80px; text-align: right; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 5px; padding: 5px;">
                    </div>
                    <div class="cost-row">
                        <span>Przewidywane zużycie (kg):</span>
                        <span id="estimatedConsumption">-- kg</span>
                    </div>
                    <div class="cost-row">
                        <span>Szacowany koszt:</span>
                        <span id="estimatedCostDisplay">-- PLN</span>
                    </div>
                    <div class="cost-total">
                        <span>Całkowity koszt:</span>
                        <span id="totalCalculatedCost">-- PLN</span>
                    </div>
                </div>

                <h3 class="card-title" style="margin-top: 25px;"><i class="fas fa-fire"></i> Efektywność Sprawności Palnika</h3>
                <div class="efficiency-gauge">
                    <div class="gauge-fill" id="efficiencyGaugeFill" style="width: 0%;"></div>
                    <span class="gauge-label" id="efficiencyGaugeLabel">0%</span>
                </div>
             </div>

             <div id="instructions-tab" class="tab-content">
                <h2 class="card-title"><i class="fas fa-book"></i> Instrukcje Użytkowania</h2>
                <div class="instructions">
                    <h3><i class="fas fa-wifi"></i> Konfiguracja Połączenia:</h3>
                    <ul>
                        <li>Upewnij się, że Twój moduł ESP32 jest podłączony do tej samej sieci Wi-Fi, co urządzenie, z którego korzystasz.</li>
                        <li>Sprawdź, czy adres brokera MQTT (domyślnie `broker.emqx.io`) oraz port są poprawne.</li>
                        <li>Dane logowania do MQTT (`agentsan007`, `Sanders24*`) są domyślne i powinny być zgodne z konfiguracją w kodzie ESP32.</li>
                    </ul>
                    <h3><i class="fas fa-cogs"></i> Podstawowe Sterowanie:</h3>
                    <ul>
                        <li><strong>Tryb Wyłączony:</strong> Całkowicie wyłącza piec.</li>
                        <li><strong>Tryb Ręczny:</strong> Pozwala na manualne sterowanie mocą dmuchawy i prędkością podajnika.</li>
                        <li><strong>Tryb Auto:</strong> Piec będzie próbował utrzymać zadaną temperaturę docelową automatycznie.</li>
                        <li><strong>Temp. Docelowa:</strong> Ustawia żądaną temperaturę kotła w trybie automatycznym.</li>
                        <li><strong>Moc Dmuchawy (%):</strong> Kontroluje siłę nadmuchu.</li>
                        <li><strong>Prędkość Podajnika (s/cykl):</strong> Określa interwał podawania pelletu (krótszy czas = więcej pelletu).</li>
                    </ul>
                    <h3><i class="fas fa-fire-alt"></i> Rozpalanie i Gaszenie:</h3>
                    <ul>
                        <li><strong>Rozpal Piec:</strong> Inicjuje proces rozpalania z użyciem grzałki i dmuchawy. Ustaw czas rozpalania i stabilizacji.</li>
                        <li><strong>Zgaś Palnik:</strong> Bezpiecznie wyłącza palnik.</li>
                    </ul>
                    <h3><i class="fas fa-broom"></i> Czyszczenie i Konserwacja:</h3>
                    <ul>
                        <li><strong>Auto-Czyszczenie:</strong> Włącza automatyczne czyszczenie pieca w regularnych odstępach czasu. Możesz dostosować interwał, czas trwania i moc dmuchawy.</li>
                        <li><strong>Tryb Konserwacji:</strong> Używaj do manualnego czyszczenia lub serwisowania pieca. Pozwala na sterowanie podajnikiem i dmuchawą dla celów konserwacyjnych.</li>
                        <li><strong>Przedmuch Dmuchawy:</strong> Konfiguruje i aktywuje cykliczny przedmuch dmuchawy dla utrzymania czystości palnika.</li>
                    </ul>
                    <h3><i class="fas fa-chart-line"></i> Wykresy i Statystyki:</h3>
                    <ul>
                        <li>Sekcja "Wykresy Temperatur" pozwala na wizualizację danych historycznych w czasie rzeczywistym oraz z ostatnich 24h, 7 dni i 30 dni.</li>
                        <li>Wybierz, które parametry chcesz wyświetlić na wykresie (Temp. Kotła, Temp. Spalin, Temp. Docelowa).</li>
                        <li>Użyj przycisków zoomu (+/-) lub resetu, aby dostosować widok wykresu.</li>
                        <li>Sekcja "Historia i Koszty" pokazuje podsumowanie zużycia pelletu i czasu pracy palnika.</li>
                        <li>Możesz wprowadzić cenę pelletu, aby obliczyć szacowany koszt zużycia.</li>
                        <li>Wskaźnik efektywności sprawności palnika pokazuje orientacyjną wydajność pracy.</li>
                    </ul>
                     <h3><i class="fas fa-exchange-alt"></i> Korekcja Temperatury:</h3>
                    <ul>
                        <li>Użyj tej funkcji, aby skorygować odczyty temperatury, jeśli zauważysz rozbieżności z innym termometrem.</li>
                        <li>Wprowadź wartość korekcji (dodatnią lub ujemną) i zapisz.</li>
                    </ul>
                    <h3><i class="fas fa-sync-alt"></i> Resetowanie Danych:</h3>
                    <ul>
                        <li><strong>Resetuj Statystyki:</strong> Czyści dane historyczne dotyczące pracy pieca (czas pracy palnika, zużycie pelletu).</li>
                        <li><strong>Resetuj Wszystkie Dane:</strong> Przywraca wszystkie ustawienia pieca do wartości domyślnych i czyści dane historyczne. Używaj ostrożnie!</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="log" id="appLog">
            <div class="log-entry"><span class="log-time">--:--:--</span> <span class="log-message">Aplikacja uruchomiona. Oczekiwanie na dane...</span></div>
        </div>

        <footer>
            <p>&copy; 2024 Pellet Boiler Control. Wersja 1.0. Zbudowane dla ESP32 z MQTT.</p>
        </footer>
    </div>
    <script src="cdn.min.js"></script>
</body>
</html>
